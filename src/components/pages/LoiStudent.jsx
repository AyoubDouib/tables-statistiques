import { useState } from "react";

export default function LoiStudent() {
  const [degreValue, setDegreValue] = useState();
  const [probaValue, setProbaValue] = useState();
  const [error, setError] = useState("");
  const [result, setResult] = useState();
  const hLine = [0.995, 0.99, 0.975, 0.95, 0.90, 0.80, 0.75, 0.70, 0.60, 0.55];
  const vLine = [
  1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 40, 60, 120, 999
  ];
  const sheduleData = [
    [
      "63,66",
      "31,82",
      "12,71",
      "6,31",
      "3,08",
      "1,376",
      "1,000",
      "0,727",
      "0,325",
      "0,158",
    ],
    [
      "9,92",
      "6,96",
      "4,30",
      "2,92",
      "1,89",
      "1,061",
      "0,816",
      "0,617",
      "0,289",
      "0,142",
    ],
    [
      "5,84",
      "4,54",
      "3,18",
      "2,35",
      "1,64",
      "0,978",
      "0,765",
      "0,584",
      "0,277",
      "0,137",
    ],
    [
      "4,60",
      "3,75",
      "2,78",
      "2,13",
      "1,53",
      "0,941",
      "0,741",
      "0,569",
      "0,271",
      "0,134",
    ],
    [
      "4,03",
      "3,36",
      "2,57",
      "2,02",
      "1,48",
      "0,920",
      "0,727",
      "0,559",
      "0,267",
      "0,132",
    ],
    [
      "3,71",
      "3,14",
      "2,45",
      "1,94",
      "1,44",
      "0,906",
      "0,718",
      "0,553",
      "0,265",
      "0,131",
    ],
    [
      "3,50",
      "3,00",
      "2,36",
      "1,90",
      "1,42",
      "0,896",
      "0,711",
      "0,549",
      "0,263",
      "0,130",
    ],
    [
      "3,36",
      "2,90",
      "2,31",
      "1,86",
      "1,40",
      "0,889",
      "0,706",
      "0,546",
      "0,262",
      "0,130",
    ],
    [
      "3,25",
      "2,82",
      "2,26",
      "1,83",
      "1,38",
      "0,883",
      "0,703",
      "0,543",
      "0,261",
      "0,129",
    ],
    [
      "3,17",
      "2,76",
      "2,23",
      "1,81",
      "1,37",
      "0,879",
      "0,700",
      "0,542",
      "0,260",
      "0,129",
    ],
    [
      "3,11",
      "2,72",
      "2,20",
      "1,80",
      "1,36",
      "0,876",
      "0,697",
      "0,540",
      "0,260",
      "0,129",
    ],
    [
      "3,06",
      "2,68",
      "2,18",
      "1,78",
      "1,36",
      "0,873",
      "0,695",
      "0,539",
      "0,259",
      "0,128",
    ],
    [
      "3,01",
      "2,65",
      "2,16",
      "1,77",
      "1,35",
      "0,870",
      "0,694",
      "0,538",
      "0,259",
      "0,128",
    ],
    [
      "2,98",
      "2,62",
      "2,14",
      "1,76",
      "1,34",
      "0,868",
      "0,692",
      "0,537",
      "0,258",
      "0,128",
    ],
    [
      "2,95",
      "2,60",
      "2,13",
      "1,75",
      "1,34",
      "0,866",
      "0,691",
      "0,536",
      "0,258",
      "0,128",
    ],
    [
      "2,92",
      "2,58",
      "2,12",
      "1,75",
      "1,34",
      "0,865",
      "0,690",
      "0,535",
      "0,258",
      "0,128",
    ],
    [
      "2,90",
      "2,57",
      "2,11",
      "1,74",
      "1,33",
      "0,863",
      "0,689",
      "0,534",
      "0,257",
      "0,128",
    ],
    [
      "2,88",
      "2,55",
      "2,10",
      "1,73",
      "1,33",
      "0,862",
      "0,688",
      "0,534",
      "0,257",
      "0,127",
    ],
    [
      "2,86",
      "2,54",
      "2,09",
      "1,73",
      "1,33",
      "0,861",
      "0,688",
      "0,533",
      "0,257",
      "0,127",
    ],
    [
      "2,84",
      "2,53",
      "2,09",
      "1,72",
      "1,32",
      "0,860",
      "0,687",
      "0,533",
      "0,257",
      "0,127",
    ],
    [
      "2,83",
      "2,52",
      "2,08",
      "1,72",
      "1,32",
      "0,859",
      "0,686",
      "0,532",
      "0,257",
      "0,127",
    ],
    [
      "2,82",
      "2,51",
      "2,07",
      "1,72",
      "1,32",
      "0,858",
      "0,686",
      "0,532",
      "0,256",
      "0,127",
    ],
    [
      "2,81",
      "2,50",
      "2,07",
      "1,71",
      "1,32",
      "0,858",
      "0,685",
      "0,532",
      "0,256",
      "0,127",
    ],
    [
      "2,80",
      "2,49",
      "2,06",
      "1,71",
      "1,32",
      "0,857",
      "0,685",
      "0,531",
      "0,256",
      "0,127",
    ],
    [
      "2,79",
      "2,48",
      "2,06",
      "1,71",
      "1,32",
      "0,856",
      "0,684",
      "0,531",
      "0,256",
      "0,127",
    ],
    [
      "2,78",
      "2,48",
      "2,06",
      "1,71",
      "1,32",
      "0,856",
      "0,684",
      "0,531",
      "0,256",
      "0,127",
    ],
    [
      "2,77",
      "2,47",
      "2,05",
      "1,70",
      "1,31",
      "0,855",
      "0,684",
      "0,531",
      "0,256",
      "0,127",
    ],
    [
      "2,76",
      "2,47",
      "2,05",
      "1,70",
      "1,31",
      "0,855",
      "0,683",
      "0,530",
      "0,256",
      "0,127",
    ],
    [
      "2,76",
      "2,46",
      "2,04",
      "1,70",
      "1,31",
      "0,854",
      "0,683",
      "0,530",
      "0,256",
      "0,127",
    ],
    [
      "2,75",
      "2,46",
      "2,04",
      "1,70",
      "1,31",
      "0,854",
      "0,683",
      "0,530",
      "0,256",
      "0,127",
    ],
    [
      "2,70",
      "2,42",
      "2,02",
      "1,68",
      "1,30",
      "0,851",
      "0,681",
      "0,529",
      "0,255",
      "0,126",
    ],
    [
      "2,66",
      "2,39",
      "2,00",
      "1,67",
      "1,30",
      "0,848",
      "0,679",
      "0,527",
      "0,254",
      "0,126",
    ],
    [
      "2,62",
      "2,36",
      "1,98",
      "1,66",
      "1,29",
      "0,845",
      "0,677",
      "0,526",
      "0,254",
      "0,126",
    ],
    [
      "2,58",
      "2,33",
      "1,96",
      "1,65",
      "1,28",
      "0,842",
      "0,674",
      "0,524",
      "0,253",
      "0,126",
    ],
  ]
  function changeDegreValue(e) {
    setDegreValue(e.target.value);
  }
  function changeProbaValue(e) {
    setProbaValue(e.target.value);
  }
  function getData() {
    setError()
    setResult()
    const hIndex = hLine.indexOf(+probaValue);

    let vIndex;
    if (+degreValue > 120) {
      vIndex = vLine.indexOf(999);
    } else {
      vIndex = vLine.indexOf(+degreValue);
    }
    
    if (+vIndex > 0 && +hIndex === -1) {
      setResult(1);
    } else {
      setResult(sheduleData[vIndex][hIndex])
    }
    
  }
  return (
    <div className="loi-du-student">
      <div className="container">
        <div className="title">Table de Loi du Student</div>
        <div className="description">{"P(T < t)"}</div>
        <div className="action-section">
          <div className="input-field">
            <input type="number" placeholder="Degré de liberté" onChange={changeDegreValue}/>
            <input type="number" placeholder="Probabilité" onChange={changeProbaValue}/>
          </div>
          <button onClick={getData}>Générer</button>
        </div>
        <div className="resultat">
          <span className="resultat-static">Résultat: </span>
          <span className="resultat-number">{result}</span>
          {error && <span className="resultat-error">{error}</span>}
        </div>
      </div>
    </div>
  )
}